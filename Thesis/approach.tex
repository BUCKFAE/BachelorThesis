%!TEX root = thesis.tex

\chapter{Approach}
\label{ch:approach}

\section{Basic rules}
\todo{Game is turn based} \\
\todo{Each player has 6 Pokémon} \\
\todo{If a Pokémon has no HP left, it faints} \\
\todo{If all Pokémon of a player fainted, the player loses} 

\section{Battling}
\label{sec:battling}
One of the key aspects of the Pokémon game is to battle other Pokémon. In the mainline games, you can 
have up to six Pokémon in your team, also known as party. There is the option to swap a Pokémon with
another Pokémon, but you can't have more than six Pokémon at any point in your team. When playing the 
original Games, you can explore the world to find more Pokémon and use your team to defeat wild Pokémon
and other Pokémon trainer. This thesis however focus on random battles taking place on Pokémon Showdown.
In a random battle, both you and your opponent get a team of six random Pokémon. At the start of the battle,
you know each of your six Pokémon but only the currently active enemy Pokémon. \\
Every turn, both players can choose to either use a Move of their currently active Pokémon or switch
their active Pokémon to another Pokémon. Moves can either deal direct damage to the enemy Pokémon or 
yield other advantages like increasing the damage dealt by the next move. Moves will be covered in more
detail in section \ref{sec:moves}. Each Pokémon has an amount of \ac{HP}. The \ac{HP} of a Pokémon
can be dropped by attacking it with a Move. If the \ac{HP} of a Pokémon drops to zero, it faints and 
can't be used in this battle anymore. A player wins, if all Pokémon of the enemy are fainted. \\
\textit{Note:} In the mainline games there is the possibility to heal or even revive a fainted 
Pokémon during battle using \textit{Healing Items} like \textit{Revive} or \textit{Hyper Potion}.
In competitive Play, only \textit{Held items} like \textit{Leftovers} are allowed. Items will be explained
in depth in section \ref{sec:items}.

\subsection{Types}
Pokémon implements a \textit{Rock-Paper-Scissors}-like system. Each Pokémon has eihter one or two of 
18 types. For example, a \textit{Fire}-type Pokémon is weak against \textit{Water}-type Pokémon
whereas a \textit{Water}-type Pokémon is weak against \textit{Grass}-type Pokémon. Lastly,
a \textit{Grass}-type Pokémon is weak against \textit{Fire}-type Pokémon. 
\begin{figure}
	\centering
	\includegraphics[width=0.7\textwidth]{images/type_chart.png}
	\caption{Pokémon type chart \cite{Pokemondb:Type}}
	\label{fig:type_chart}
\end{figure}
The figure \ref{fig:type_chart} shows how different Pokémon types interact with each other. It is important
to note, that the type modifiers will be multiplied if a Pokémon has two types. For example, a \textit{Fire}-type
attack will deal 4 times the damage against \textit{Parasect} as \textit{Parasect} has the types \textit{Grass} and
\textit{Bug} \cite{Veekun:Parasect}.

\subsection{Moves}
\label{sec:moves}
Moves can be split up into three categories: \textit{Physical}-, \textit{Special}- and \textit{Status}-Moves.
While \textit{Physical}- and \textit{Special}-moves usually deal damage to the opponent Pokémon, 
\textit{Status}-Moves can for example change the weather, which plays a role in damage calculation explained
in section \ref{sec:damage-calculation}, inflict status effects, raise or lower the stats of a Pokémon. Just 
as Pokémon, each Move has one of the 18 possible types. 

\subsubsection{Move Categories}
\todo{Physical and Special moves} 

\subsection{Pokémon}
\label{sec:pokemon}
As stated in \ref{sec:battling}, each Pokémon has a given amount of \ac{HP}. However, two Pokémon of the same 
\textit{species}, meaning two Pokémon with the same name, can have different starting \ac{HP} values. The figure
\ref{fig:charizard-stats} shows the different \textit{stats} for the Pokémon \textit{Charizard}.
\begin{figure}
	\centering
	\includegraphics[width=0.7\textwidth]{images/charizard-stats.png}
	\caption{Charizard's stats \cite{Bulbapedia:Charizard}}
	\label{fig:charizard-stats}
\end{figure}
\subsubsection{Explanation of stats}
\textbf{HP:} The \ac{HP} determines how much damage a Pokémon can receive before fainting. \\
\textbf{Attack:} The \ac{ATK} determines how much damage a Pokémon will deal when using 
a \textit{Physical}-Move. \\
\textbf{Defense:} The \ac{DEF} determines how well a Pokémon can resist against physical attacks. \\
\textbf{Sp. Atk:} The \ac{SPA} determines how much damage a Pokémon will deal when using
a \textit{Special}-Move. \\
\textbf{Sp. Def:} The \ac{SPD} determines how well a Pokémon can resist against special attacks. \\
\textbf{Speed:} The \ac{SPE} determines how fast a Pokémon can act. This is important as instead of
both Pokémon moving at the same time, the Pokémon with the higher \ac{SPE} will move first. After 
the faster Pokémon moved, the slower Pokémon will move. Therefore, the faster Pokémon is usually at an
advantage. 
\todo{Cover priority moves and trickroom}
\todo{Cover evasion / accuracy, context to showdown}

\subsubsection{Determination of stats}
The total stat of a Pokémon is calculated as described in equation \ref{eq:stats-hp} and equation 
\ref{eq:stats-other} \cite{Bulbapedia:Stat}.
\begin{equation}
	\label{eq:stats-hp}
	HP = \Bigl\lfloor \frac{(2 \times Base + IV + \lfloor \frac{EV}{4} \rfloor) \times Level}{100}\Bigr\rfloor
	+ Level + 10 \\
\end{equation}
\begin{equation}
	\label{eq:stats-other}
	OtherStat = \Bigl\lfloor \Big( \frac{2 \times Base + IV + \lfloor \frac{EV}{4} \rfloor) \times Level}
	{100} + 5\Big) \times Nature \Bigr\rfloor
\end{equation}
\textbf{Base:} Refers to the base stat of a Pokémon. Two Pokémon of the same species will always have the 
same base-stats. As seen in figure \ref{fig:charizard-stats}, a \textit{Charizard} will always have a
base-\ac{ATK} of 84.

\textbf{Level:} As mentioned in section \ref{sec:battling}, the goal of the mainline games is to create 
a team of six Pokémon and to make that team stronger by fighting other Pokémon. If a Pokémon defeats
enough other Pokémon, it grows a Level. The maximum level of a Pokémon is 100. If the level of a Pokémon
increases, so will its stats. For each level gained (ignoring Nature), stats will increase by 1/50 the
base stat value, and 1/100 the combined \ac{IV} and \ac{EV} values \cite{Bulbapedia:Stat}. 
In Pokémon Showdown, the level of  a Pokémon is set at the start of the battle and won't 
increase \cite{Smogon:RandBatsGuide}.

\textbf{Nature:} A Pokémon has a nature. Most natures enhance the growth of one stat, while hindering
the growth of another. After all other calculations are finished, the stat that the Nature enhances will
be 100\% of what it would be without the Nature, and the stat hindered will be 90\% of its normal value
\cite{Bulbapedia:Stat}. Nature can be neglected in this thesis as all Pokémon in random battles have
a neutral nature, meaning no stat is enhanced or hindered \cite{Smogon:RandBatsGuide}.

\textbf{IV:} Refers to the \ac{IV} of a Pokémon. These cause two Pokémon of the same species to have
different Stats \cite{Bulbapedia:Stat}. Pokémon in Pokémon Showdown will always have the best possible \ac{IV} 
stat, 31, unless it is a disadvantage for the Pokémon, then it will be zero \cite{Smogon:RandBatsGuide}.

\textbf{EV:} These are the \ac{EV} of the Pokémon. \ac{EV} are what causes a trained Pokémon to have higher
stats than an untrained counterpart of the same level. For every 4 \ac{EV} gained, a level 100 Pokémon 
will have 1 extra point in the given stat. A Pokémon can earn up to 510 \ac{EV}, but can't have more than
255 \ac{EV} in a single stat \cite{Bulbapedia:Stat}. Random Pokémon on Showdown will always have 85 
\ac{EV} in each stat, or 0 in the case that having a high stat being detrimental \cite{Smogon:RandBatsGuide}.

\subsection{Switching}
\label{sec:switching}

\subsection{Items}
\label{sec:items}

\subsection{Field Conditions}
\todo{Weather conditions} \\

\subsection{Damage calculation}
\label{sec:damage-calculation}
The damage dealt by a move mainly depends on the \textit{level} of the Pokémon
that uses the move, its effective Attack or Special Attack stat, the
opponent's effective Defense or Special Defense stat and the move's effective
power. 

Precisely, the damage is calculated as follows\cite{Bulbapedia:Damage}:
\begin{dmath}
  \text{Damage} = \left(\frac{\left(\frac{2 \times \text{Level}}{5}\right) \times \text{Power} \times \text{A / D}}{50} + 2\right)
	\times Targets
	\times Weather
	\times Badge
	\times Critical
	\times random
	\times STAB
	\times Type
	\times Burn
	\times other
\end{dmath}

The only exception for this are moves that deal direct damage. A list 
of these moves can be found at \cite{Bulbapedia:DirectDamage}.

\subsubsection{Level}
\textit{Level} refers to the level of the attacking Pokémon\cite{Bulbapedia:Damage}. 
In Pokémon Showdown, the level is displayed next to the name of the Pokémon.
\todo{Mainline games leveling}

\subsubsection{A / D}
\textit{A} is the effective Attack stat of the attacking Pokémon if the used move is a physical move,
\todo{Reference to physical moves} \\
or the effective Special Attack stat of the attacking Pokémon if the used move is a special move.
\todo{Reference to special moves}
\\
\textit{D} is likewise the effective Defense stat of the target if the used move is a physical move,
or the effective Special Defense of the target if the used move is a special move\cite{Bulbapedia:Damage}.

There are four moves that use stats from different categories, more Information can be found
at \cite{Bulbapedia:MoveStatDifferentCategories}.

\subsubsection{Power}
Power is the effective power of the used move.
\todo{When is the power not equal to the base power}
The \textit{Base Power} of a move in Showdown can be seen when hovering over a move in the move list. \\
\textit{Note:} The same move will always have the same base power. For example, \textit{Fire Punch} will
always have a base power of 75\cite{Bulbapedia:FirePunch}.

\subsubsection{Weather}
The \textit{Weather} modifier is 1.5 if a \textit{Water-type} move is used during \textit{rain} or a 
\textit{Fire-type} move during \textit{Harsh Sunlight}. The modifier is 0.5 if a \textit{Water-type} move
is used during \textit{Harsh Sunlight} or a \textit{Fire-type} move during \textit{rain} \cite{Bulbapedia:Damage}.
\todo{Reference to weather section}

\subsubsection{Critical}
In the latest Generation, a \ac{CRIT} deals 1.5 times the damage compared to a normal hit.
If the \ac{CRIT} rate is not increased, the chance of landing a \ac{CRIT} is 1/24
\cite{Bulbapedia:CriticalHit}. Increasing \ac{CRIT} rate, as well as other stats, will 
be explained in chapter \ref{sec:boosting}. \\
\textit{Note:} In earlier games, \ac{CRIT}s worked different, see \cite{Bulbapedia:CriticalHit} for
more details.

\subsubsection{Random}
\textit{Random} is a random integer percentage between 85\% and 100\%. Because of this, the same move
may deal different damage in the same scenario \cite{Bulbapedia:Damage}.

\subsubsection{STAB}
\textit{STAB} stands for \textit{Same Type Attack Bonus}. It is a multiplier of 1.5 if the used move
is of the same type as the attacking Pokémon. Otherwise, it is 1.0 \cite{Bulbapedia:Damage}.

\subsubsection{Type}
This is the in section \ref{sec:types} described type modifier \cite{Bulbapedia:Damage}.

\subsubsection{Burn}
\textit{Burn} is 0.5 if the attacking Pokémon is burned, and the used move
is a physical move\footnote{This does not apply if the attacking Pokémon has the Ability \textit{Guts}
or the used move is \textit{Facade}}. Otherwise, it is 1.0 \cite{Bulbapedia:Damage}.

\subsubsection{Other}
The \textit{other} modifier is usually 1. A list of exceptions can be found at \cite{Bulbapedia:Damage}.

\subsection{Effective Stats}
\subsubsection{Boosting}
\label{sec:boosting}
\todo{Boosting critical rate}

\section{Hazards}
An \textit{entry hazard} is a condition that affects a side of the field that causes
any Pokémon that is sent into battle on that side of the field to be afflicted by 
a negative effect. Entry hazards are created by moves, usually status moves
\cite{Bulbapedia:EntryHazards}. \\
\todo{This paragraph is copied word by word from Bulbapedia}
\subsection{List of entry hazards}
Currently, there are five moves that create an entry hazard

\subsubsection{Spikes}
\textit{Spikes} is a \textit{Ground}-type entry hazard that causes the opponent
to lose $1/8$\% of their maximum \ac{HP} when they enter the field. This
effect can be stacked up to three times. Two layers of spikes will deal
$1/6$\% and three layers will deal $1/4$\% of the enemies maximum \ac{HP}. \\
\todo{Removal and Immunity of Spikes}
Spikes are created by the move \textit{Spikes}\cite{Bulbapedia:Spikes}.

\subsubsection{Stealth Rock}
\label{sec:stealthrock}
The move \textit{Stealth Rock} sets an entry hazard around the target Pokémon
causing Pokémon on the target's field to receive damage upon being switched in.
The amount of damage inflicted is affected by the effectiveness of the type
\textit{Rock} against the target. Unlike Spikes, this entry hazard does not stack.
The damage taken from the victim's maximum is denoted in table 
\ref{tab:stealth-rock-damage}\cite{Bulbapedia:StealthRock}.
\begin{table}[h]
	\label{tab:stealth-rock-damage}
	\centering
	\begin{tabular}{|c|c|}
		\hline
		\textbf{Type effectiveness} & \textbf{Damage (Max. \ac{HP}}) \\
		\hline 
		0.25x & 3.125\% \\ 
		\hline 
		0.5x &  6.25\% \\ 
		\hline 
		1x & 12.5\% \\
		\hline
		2x & 25\% \\
		\hline
		4x & 50\% \\
		\hline
	\end{tabular} 
	\caption{Damage dealt to Pokémon by Stealth Rocks\cite{Bulbapedia:StealthRock}}
\end{table}
\textit{Note:} Stealth Rocks can also be created by the move \textit{G-Max Stonesurge}.
This damage-dealing Water-type G-Max move is exclusive to Gigantamax Drednaw
\cite{Bulbapedia:GMaxStonesurge}. \\
\todo{Does this move exist in Showdown}

\subsubsection{Sticky Web}
The entry hazard set by the \textit{Bug}-type move \textit{Sticky Web} lowers the
opponents speed stat by one stage upon switching in \cite{Bulbapedia:StickyWeb}. \\
\todo{Pokémon that are not affected by this}

\subsubsection{Poison spikes}
\label{sec:poison-spikes}
\textit{Poison Spikes} set by the \textit{Poison}-type move \textit{Toxic Spikes}
cause the opponent to become poisoned. If two layers of spikes are set, the
Pokémon instead becomes badly poisoned \cite{Bulbapedia:ToxicSpikes}. \\
\todo{Pokémon not affected} \\
\todo{Explain (badly) poisoning}

\subsubsection{Sharp steel}
This entry hazard works very similar to Stealth Rock described in \ref{sec:stealthrock}.
However, Sharp steel can only be set by the \textit{Steel}-type move
\textit{G-Max Steelsurge} which is the exclusive G-Max Move of Gigantamax Copperhead.
The damage dealt by Sharp steel does not stack, the amount of damage dealt is
based on the Type effectiveness of the \textit{Steel}-type against the target.
Exact damage modifiers can be found in table \ref{tab:sharp-steel-damage}
\cite{Bulbapedia:GMaxSteelsurge}.
\begin{table}[h]
	\label{tab:sharp-steel-damage}
	\centering
	\begin{tabular}{|c|c|}
		\hline
		\textbf{Type effectiveness} & \textbf{Damage (Max. \ac{HP}}) \\
		\hline 
		0.25x & 3.125\% \\ 
		\hline 
		0.5x &  6.25\% \\ 
		\hline 
		1x & 12.5\% \\
		\hline
		2x & 25\% \\
		\hline
		4x & 50\% \\
		\hline
	\end{tabular} 
	\caption{Damage dealt to Pokémon by Sharp Steel\cite{Bulbapedia:GMaxSteelsurge}}
\end{table}
\todo{Unaffected Pokémon}

\subsection{Hazard counterplay}
There are some moves that can remove entry hazards. \textit{Rapid Spin} 
\cite{Bulbapedia:RapidSpin} removes entry hazards from the user's side of the field and
\textit{Defog}\cite{Bulbapedia:Defog} removes entry hazards on both sides of the 
field\footnote{In older games \textit{Defog} would only remove Hazards on the
target's side of the field. But as we only investigate the latest version, this
won't be covered in detail.}. In addition, 
\textit{Court Change}\cite{Bulbapedia:CourtChange} will exchange the entry hazards
on each side of the field, along with other one-sided field conditions.
\todo{What other one-sided field conditions are there?}
If a grounded\footnote{The term \textit{grounded} is used to describe a Pokémon that
can't be affected by damaging \textit{Ground}-type moves and several other associated 
effects\cite{Bulbapedia:Grounded}.}
\textit{Poison}-type Pokémon enters the battle, it will remove Toxic 
Spikes, described in \ref{sec:poison-spikes}, from its side of the field.
Lastly, Pokémon holding the item 
\textit{Heavy-Duty Boots}\cite{Bulbapedia:HeavyDutyBoots} are unaffected by
entry hazards, but grounded \textit{Poison}-type Pokémon can still remove
Toxic Spikes even if they hold the boots\cite{Bulbapedia:EntryHazards}.
There are various exceptions and special cases to hazards. 
\todo{Special cases of hazards}